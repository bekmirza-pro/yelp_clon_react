{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\PERN_STACK YELP-CLONE\\\\client\\\\src\\\\components\\\\RestaurantList.jsx\";\nimport React, { useEffect, useContext } from \"react\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport { useHistory } from \"react-router-dom\";\nimport StarRating from \"./StarRating\";\n\nconst RestaurantList = props => {\n  const {\n    restaurants,\n    setRestaurants\n  } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        setRestaurants(response.data);\n      } catch (err) {}\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDelete = async (e, id) => {\n    e.stopPropagation();\n\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`);\n      setRestaurants(restaurants.filter(restaurant => {\n        return restaurant.restaurant_id !== id;\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n\n  const handleRestaurantSelect = id => {\n    history.push(`/restaurants/${id}`);\n  };\n\n  const renderRating = raiting => {\n    console.log(raiting);\n\n    if (!raiting.count) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-warning\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 14\n        }\n      }, \"0 reviews\");\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StarRating, {\n      rating: raiting.restaurant_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-warning ml-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, \"(\", raiting.count, \")\"));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover table-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"bg-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Restaurant\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Location\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Price Range\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, \"Ratings\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, restaurants && restaurants.map(restaurant => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      onClick: () => handleRestaurantSelect(restaurant.restaurant_id),\n      key: restaurant.restaurant_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }\n    }, restaurant.restaurant_name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, restaurant.location), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, \"$\".repeat(restaurant.price_range)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, renderRating(restaurant)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => handleUpdate(e, restaurant.restaurant_id),\n      className: \"btn btn-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, \"Update\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => handleDelete(e, restaurant.restaurant_id),\n      className: \"btn btn-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, \"Delete\")));\n  }))));\n};\n\nexport default RestaurantList;","map":{"version":3,"sources":["C:/Users/ASUS/OneDrive/Рабочий стол/PERN_STACK YELP-CLONE/client/src/components/RestaurantList.jsx"],"names":["React","useEffect","useContext","RestaurantFinder","RestaurantsContext","useHistory","StarRating","RestaurantList","props","restaurants","setRestaurants","history","fetchData","response","get","data","err","handleDelete","e","id","stopPropagation","delete","filter","restaurant","restaurant_id","console","log","handleUpdate","push","handleRestaurantSelect","renderRating","raiting","count","map","restaurant_name","location","repeat","price_range"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport { useHistory } from \"react-router-dom\";\nimport StarRating from \"./StarRating\";\n\nconst RestaurantList = (props) => {\n  const { restaurants, setRestaurants } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        setRestaurants(response.data);\n        \n      } catch (err) {}\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDelete = async (e, id) => {\n    e.stopPropagation();\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`);\n      setRestaurants(\n        restaurants.filter((restaurant) => {\n          return restaurant.restaurant_id !== id;\n        })\n      );\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n\n  const handleRestaurantSelect = (id) => {\n    history.push(`/restaurants/${id}`);\n  };\n\n  const renderRating = (raiting) => {\n    console.log(raiting);\n    if (!raiting.count) {\n      return <span className=\"text-warning\">0 reviews</span>;\n    }\n    return (\n      <>\n        <StarRating rating={raiting.restaurant_id} />\n        <span className=\"text-warning ml-1\">({raiting.count})</span>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"list-group\">\n      <table className=\"table table-hover table-dark\">\n        <thead>\n          <tr className=\"bg-primary\">\n            <th scope=\"col\">Restaurant</th>\n            <th scope=\"col\">Location</th>\n            <th scope=\"col\">Price Range</th>\n            <th scope=\"col\">Ratings</th>\n            <th scope=\"col\">Edit</th>\n            <th scope=\"col\">Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          {restaurants &&\n            restaurants.map((restaurant) => {\n              return (\n                <tr\n                  onClick={() => handleRestaurantSelect(restaurant.restaurant_id)}\n                  key={restaurant.restaurant_id}\n                >\n                  <td>{restaurant.restaurant_name}</td>\n                  <td>{restaurant.location}</td>\n                  <td>{\"$\".repeat(restaurant.price_range)}</td>\n                  <td>{renderRating(restaurant)}</td>\n                  <td>\n                    <button\n                      onClick={(e) => handleUpdate(e, restaurant.restaurant_id)}\n                      className=\"btn btn-warning\"\n                    >\n                      Update\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      onClick={(e) => handleDelete(e, restaurant.restaurant_id)}\n                      className=\"btn btn-danger\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          {/* <tr>\n            <td>mcdonalds</td>\n            <td>New YOrk</td>\n            <td>$$</td>\n            <td>Rating</td>\n            <td>\n              <button className=\"btn btn-warning\">Update</button>\n            </td>\n            <td>\n              <button className=\"btn btn-danger\">Delete</button>\n            </td>\n          </tr>\n\n          <tr>\n            <td>mcdonalds</td>\n            <td>New YOrk</td>\n            <td>$$</td>\n            <td>Rating</td>\n            <td>\n              <button className=\"btn btn-warning\">Update</button>\n            </td>\n            <td>\n              <button className=\"btn btn-danger\">Delete</button>\n            </td>\n          </tr> */}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default RestaurantList;\n"]},"metadata":{},"sourceType":"module"}